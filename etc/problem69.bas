0000 REM Prohibitively slow on the online interpreter :(
1000 CLS
1010 ARRAY P
1020 LET P[1] = 0
1030 FOR I = 2 to 1000000
1040     LET P[I] = 1
1050 NEXT I
1060 FOR I = 2 TO 1000000
1070     IF P[I] THEN 1120
1080     FOR N = I TO 1000000 STEP I
1090         LET P[N] = 0
1110     NEXT N
1120 NEXT I
1130 LET X = 0
1140 LET S = 0
1150 FOR M = 1 TO 1000000
1160     GOSUB 2000
1170     LET T = M / R
1180     IF T <= S THEN 1210
1190     LET X = M
1200     LET S = T
1210 NEXT M
1220 PRINT X
2000 REM Takes M, returns in R
2000 IF P[M] = 0 THEN 2030
2010 LET R = M - 1
2020 RETURN
2030 LET R = M
2040 FOR D = 2 TO N
2050     IF P[D] = 0 THEN 2080
2060     IF N % P <> 0 THEN 2080
2070     LET R = R * (1 - 1 / D)
2080 NEXT D
2090 RETURN
